version: 2.1
jobs:
  build:
    docker:
      - image: curlimages/curl
    steps:
      - run:
          name: hello
          command: echo 'hello'
      - run:
          name: echo context
          command: |
            echo "${PAT}"
            echo "${CIRCLE_BRANCH}"
      - run:
          name: action webhook
          command: |
            echo curl -H "Authorization: token ${PAT}" \
              --data \'{"event_type": "${CIRCLE_BRANCH}"}\' \
              https://api.github.com/repos/rainchei/actions-webhook/dispatches

workflows:
  branch-build:
    jobs:
      - build:
          context: actions-webhook
          filters:
            branches:
              only:
                - main
